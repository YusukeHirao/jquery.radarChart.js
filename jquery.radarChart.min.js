// Generated by CoffeeScript 1.6.2
/*
* jquery.radarChart.js
* Author: Yusuke Hirao [http://www.yusukehirao.com]
* Version: 0.3.0.0
* Github: https://github.com/YusukeHirao/jquery.radarChart.js
* Licensed under the MIT License
* Require: jQuery v@1.9.1
*/(function(){"use strict";var e,t,n,r,i,s={}.hasOwnProperty,o=function(e,t){function r(){this.constructor=e}for(var n in t)s.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};i=this,e=i.jQuery,t=function(){function e(e,t,n,r,i){this.ctx=e,this.sides=t!=null?t:3,this.radius=n!=null?n:100,this.x=r!=null?r:0,this.y=i!=null?i:0,this.interiorAngle=Math.PI*2/this.sides}return e.prototype.ctx=null,e.prototype.sides=3,e.prototype.interiorAngle=0,e.prototype.x=0,e.prototype.y=0,e.prototype.radius=100,e.prototype.rotate=0,e.prototype.strokeStyle="#000",e.prototype.lineWidth=1,e.prototype.fillStyle="none",e.prototype.draw=function(){var e,t,n,r,i,s;n=this.ctx,n.beginPath(),t=this.getApexes();for(r=i=0,s=t.length;i<s;r=++i)e=t[r],r===0?n.moveTo(e[0],e[1]):n.lineTo(e[0],e[1]);return n.closePath(),this.fillStyle&&this.fillStyle!=="none"&&(n.fillStyle=this.fillStyle,n.fill(),n.fillStyle="transparent"),this.strokeStyle&&this.strokeStyle!=="none"&&(n.strokeStyle=this.strokeStyle,n.stroke()),this.setLineDash([]),this},e.prototype.radiate=function(){var e,t,n,r,i,s;n=this.ctx,t=this.getApexes(),r=!1,this.strokeStyle&&this.strokeStyle!=="none"&&(r=!0),r&&(n.strokeStyle=this.strokeStyle);for(i=0,s=t.length;i<s;i++)e=t[i],n.beginPath(),n.moveTo(this.x,this.y),n.lineTo(e[0],e[1]),n.closePath(),r&&n.stroke();return this.setLineDash([]),this},e.prototype.scale=function(e){var t,n,r,i,s,o,u,a,f;e==null&&(e=5),i=this.ctx,r=this.getApexes(),s=!1,this.strokeStyle&&this.strokeStyle!=="none"&&(s=!0),s&&(i.strokeStyle=this.strokeStyle);for(a=0,f=r.length;a<f;a++)n=r[a],i.beginPath(),o=n[0],u=n[1],t=n[2],i.moveTo(o+Math.sin(t)*e,u-Math.cos(t)*e),i.lineTo(o-Math.sin(t)*e,u+Math.cos(t)*e),i.stroke();return this},e.prototype.getApexes=function(){var e,t,n,r;e=[];for(t=n=0,r=this.sides;0<=r?n<=r:n>=r;t=0<=r?++n:--n)e.push(this.getApex(t));return e},e.prototype.getApex=function(e){var t,n,r,i;return n=(this.rotate-90)*Math.PI/180,t=this.interiorAngle*e+n,r=this.x+Math.cos(t)*this.radius,i=this.y+Math.sin(t)*this.radius,[r,i,t]},e.prototype.fill=function(e){return this.fillStyle=e,this.ctx.fillStyle=this.fillStyle,this},e.prototype.stroke=function(e,t){var n;return this.strokeStyle=e,t==null&&(t=this.lineWidth),n=this.ctx,n.lineWidth=t,n.strokeStyle=this.strokeStyle,this},e.prototype.dash=function(e,t,n){return this.strokeStyle=e,t==null&&(t=this.lineWidth),n==null&&(n=[5,2]),this.setLineDash(n),this.stroke(e,t)},e.prototype.setLineDash=function(e){var t;return t=this.ctx,t.setLineDash?t.setLineDash(e):t.mozDash!=null?t.mozDash=e:t.webkitLineDash!=null&&(t.webkitLineDash=e),this},e}(),n=function(){function r(t,n){var i,s;this.ctx=t;if(!(this instanceof r))return new r(t,n);e.extend(this,n),(s=this.gridBorderColor)==null&&(this.gridBorderColor=this.gridLineColor);switch(this.subGridType){case"line":this.subGridType=0;break;case"dash":this.subGridType=1;break;case"scale":this.subGridType=2;break;default:this.subGridType=0}this.scale!==1&&(i=this.scale,this.radius=this.radius*i,this.plotLineWidth=this.plotLineWidth*i,this.gridLineWidth=this.gridLineWidth*i,this.gridBorderWidth=this.gridBorderWidth*i,this.font=(this.font||"").replace(/\d+/i,function(e){return e*i}),this.offsetX=this.offsetX*i,this.offsetY=this.offsetY*i),this.cX=this.radius+this.offsetX,this.cY=this.radius+this.offsetY,this.datas=[]}var n;return r.prototype.ctx=null,r.prototype.radius=0,r.prototype.plotLineColor="red",r.prototype.plotLineWidth=3,r.prototype.plotBGColor="rgba(255, 0, 0, 0.2)",r.prototype.gridLength=null,r.prototype.gridLineColor="#ccc",r.prototype.gridLineWidth=1,r.prototype.subGridLineColor="#ccc",r.prototype.subGridLineWidth=1,r.prototype.subGridType=0,r.prototype.subScaleLineLength=5,r.prototype.gridBorderColor=null,r.prototype.gridBorderWidth=3,r.prototype.gridBGColor="#fff",r.prototype.divisionGridStep=1,r.prototype.divisionNumberStep=1,r.prototype.divisionGridPartition=1,r.prototype.fontColor="#000",r.prototype.font="bold 13px Arial",r.prototype.offsetX=0,r.prototype.offsetY=0,r.prototype.scale=1,r.prototype.cX=0,r.prototype.cY=0,r.prototype.divisions=0,r.prototype.apexLength=0,r.prototype.datas=null,r.dataParser=function(e){var t,n;return e=e.replace(/[^0-9,\.\|\-]/g,""),n=e.split("|"),n=function(){var e,r,i;i=[];for(e=0,r=n.length;e<r;e++)t=n[e],i.push(t.split(","));return i}(),n},n=function(e){return Math.max.apply(Math,e)},r.prototype.add=function(t){var r,i,s,o,u;e.isArray(t[0])?r=t:r=[t],this.datas=this.datas.concat(t),u=this.datas;for(s=0,o=u.length;s<o;s++)t=u[s],i=Math.ceil(n(t)),this.gridLength=Math.max(i,this.gridLength),this.apexLength=Math.max(t.length,this.apexLength);return this.divisions=this.radius/this.gridLength,this},r.prototype.draw=function(){var t,n,r,i,s,o,u;this.drawGrid(),i=e.isArray(this.plotLineColor),i&&(t=this.plotLineColor.length),u=this.datas;for(r=s=0,o=u.length;s<o;r=++s)n=u[r],i?this.drawData(n,this.plotLineColor[r%t]):this.drawData(n);return this.drawNumber(),this},r.prototype.drawData=function(e,n){var r,i,s,o,u;n==null&&(n=this.plotLineColor),this.ctx.beginPath(),i=0;while(i<this.apexLength)u=parseFloat(e[i])||0,o=this.divisions*u,s=new t(null,this.apexLength,o,this.cX,this.cY),r=s.getApex(i),i===0?this.ctx.moveTo(r[0],r[1]):this.ctx.lineTo(r[0],r[1]),i+=1;return this.ctx.lineWidth=this.plotLineWidth,this.ctx.strokeStyle=n,this.ctx.fillStyle=this.plotBGColor,this.ctx.closePath(),this.ctx.stroke(),this.ctx.fill(),this},r.prototype.drawGrid=function(){var e,n,r,i;n=this.divisions/this.divisionGridPartition,i=this.gridLength*this.divisionGridPartition;while(i){r=new t(this.ctx,this.apexLength,n*i,this.cX,this.cY);if(i===this.gridLength*this.divisionGridPartition)r.stroke(this.gridBorderColor,this.gridBorderWidth).fill(this.gridBGColor).draw(),r.stroke(this.gridLineColor,this.gridLineWidth/2).radiate();else{e=i/this.divisionGridPartition;if(e===Math.floor(e))r.stroke(this.gridLineColor,this.gridLineWidth).draw();else switch(this.subGridType){case 0:r.stroke(this.subGridLineColor,this.subGridLineWidth/3).draw();break;case 1:r.dash(this.subGridLineColor,this.subGridLineWidth).draw();break;default:r.stroke(this.gridLineColor,this.gridLineWidth/2).scale(this.subScaleLineLength)}}i-=1}return this},r.prototype.drawNumber=function(){var e,t,n;n=this.gridLength+1,e=-11,t=8,this.ctx.font=this.font,this.ctx.fillStyle=this.fontColor,this.ctx.strokeStyle=this.gridBGColor;while(n)n-=1,n%this.divisionNumberStep||this.ctx.fillText(""+n,this.cX+e,this.cY-this.divisions*n+t);return this},r}(),r=function(n){function i(t,n){var r,s,o,u;this.canvas=t;if(!(this instanceof i))return new i(t,n);i.__super__.constructor.apply(this,arguments),this.ctx=null,r=e(t),u=r.attr("width")||r.width(),o=r.attr("height")||r.height(),r.css({display:"inline-block",width:u,height:o}),s=e('<div class="__rader_raphael" />'),s.insertAfter(r),s.css({position:"absolute",top:r.position().top,left:r.position().left}),this.svg=Raphael(s[0],u,o)}var r;return o(i,n),r=function(){function e(){}return e.apexesToPathString=function(e){var t,n;return n=function(){var n,r,i;i=[];for(n=0,r=e.length;n<r;n++)t=e[n],i.push(""+t[0]+" "+t[1]);return i}(),"M"+n.join("L")},e}(),i.prototype.canvas=null,i.prototype.svg=null,i.prototype.drawGrid=function(){var e,n,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x;a=this.divisions/this.divisionGridPartition,h=this.gridLength*this.divisionGridPartition;while(h){f=new t(null,this.apexLength,a*h,this.cX,this.cY);if(h===this.gridLength*this.divisionGridPartition){i=f.getApexes(),o=r.apexesToPathString(i)+"Z",s=this.svg.path(o),s.attr({stroke:this.gridBorderColor,"stroke-width":this.gridBorderWidth,fill:this.gridBGColor}),v="";for(w=0,S=i.length;w<S;w++)n=i[w],v+="M"+f.x+" "+f.y+"L"+n[0]+" "+n[1]+"Z";d=this.svg.path(v),d.attr({stroke:this.gridLineColor,"stroke-width":this.gridLineWidth/2})}else{u=h/this.divisionGridPartition;if(u===Math.floor(u))i=f.getApexes(),c=r.apexesToPathString(i)+"Z",l=this.svg.path(c),l.attr({stroke:this.gridLineColor,"stroke-width":this.gridLineWidth});else switch(this.subGridType){case 0:i=f.getApexes(),c=r.apexesToPathString(i)+"Z",l=this.svg.path(c),l.attr({stroke:this.subGridLineColor,"stroke-width":this.subGridLineWidth/3});break;case 1:break;default:i=f.getApexes(),p=this.subScaleLineLength,g="";for(E=0,x=i.length;E<x;E++)n=i[E],y=n[0],b=n[1],e=n[2],g+="M"+(y+Math.sin(e)*p)+" "+(b-Math.cos(e)*p),g+="L"+(y-Math.sin(e)*p)+" "+(b+Math.cos(e)*p);m=this.svg.path(g),m.attr({stroke:this.gridLineColor,"stroke-width":this.gridLineWidth/2})}}h-=1}return this},i.prototype.drawData=function(e,n){var r,i,s,o,u,a;n==null&&(n=this.plotLineColor),i=0,u="";while(i<this.apexLength)a=parseFloat(e[i])||0,o=this.divisions*a,s=new t(null,this.apexLength,o,this.cX,this.cY),r=s.getApex(i),i===0?u+="M"+r[0]+" "+r[1]:u+="L"+r[0]+" "+r[1],i+=1;return u+="Z",this.svg.path(u).attr({stroke:n,fill:this.plotBGColor,"stroke-width":this.plotLineWidth}),this},i.prototype.drawNumber=function(){var e,t,n,r,i,s,o;r=this.gridLength+1,t=-11,n=8;while(r)r-=1,r%this.divisionNumberStep||(s=this.cX+t,o=this.cY-this.divisions*r+n,i=""+r,e=this.svg.text(s,o,i),e.attr({font:this.font,fill:this.fontColor}));return this},i}.call(this,n),e.fn.radarChart=function(t){return t=e.extend({data:function(t){return t.dataParser(e(this).data("values"))}},t),this.each(function(){var i,s,o,u,a;if(this.nodeName.toLowerCase()!=="canvas")return;i=e(this),(a=t.radius)==null&&(t.radius=Math.min(i.width(),i.height())/2),u=e.isFunction(t.data)?t.data.call(this,n):e.isArray(t.data[0])?u=t.data:u=[t.data],this.getContext?(o=this.getContext("2d"),s=new n(o,t)):s=new r(this,t),s.add(u),s.draw()})}}).call(this);