// Generated by CoffeeScript 1.6.2
/*
* jquery.radarChart.js
* Author: Yusuke Hirao [http://www.yusukehirao.com]
* Version: 0.2.0.0
* Github: https://github.com/YusukeHirao/jquery.radarChart.js
* Licensed under the MIT License
* Require: jQuery v@1.9.1
*/(function(){"use strict";var e,t,n,r;r=this,e=r.jQuery,t=function(){function e(e,t,n,r,i){this.ctx=e,this.sides=t!=null?t:3,this.radius=n!=null?n:100,this.x=r!=null?r:0,this.y=i!=null?i:0,this.interiorAngle=Math.PI*2/this.sides}return e.prototype.ctx=null,e.prototype.sides=3,e.prototype.interiorAngle=0,e.prototype.x=0,e.prototype.y=0,e.prototype.radius=100,e.prototype.rotate=270,e.prototype.strokeStyle="#000",e.prototype.lineWidth=1,e.prototype.fillStyle="none",e.prototype.draw=function(){var e,t,n,r,i,s;n=this.ctx,n.beginPath(),t=this.getApexes();for(r=i=0,s=t.length;i<s;r=++i)e=t[r],r===0?n.moveTo(e[0],e[1]):n.lineTo(e[0],e[1]);return n.closePath(),this.fillStyle&&this.fillStyle!=="none"&&(n.fillStyle=this.fillStyle,n.fill(),n.fillStyle="transparent"),this.strokeStyle&&this.strokeStyle!=="none"&&(n.strokeStyle=this.strokeStyle,n.stroke()),this.setLineDash([]),this},e.prototype.radiate=function(){var e,t,n,r,i,s;n=this.ctx,t=this.getApexes(),r=!1,this.strokeStyle&&this.strokeStyle!=="none"&&(r=!0),r&&(n.strokeStyle=this.strokeStyle);for(i=0,s=t.length;i<s;i++)e=t[i],n.beginPath(),n.moveTo(this.x,this.y),n.lineTo(e[0],e[1]),n.closePath(),r&&n.stroke();return this.setLineDash([]),this},e.prototype.getApexes=function(){var e,t,n,r;e=[];for(t=n=0,r=this.sides;0<=r?n<=r:n>=r;t=0<=r?++n:--n)e.push(this.getApex(t));return e},e.prototype.getApex=function(e){var t,n,r,i;return t=this.rotate*Math.PI/180,n=t+this.interiorAngle*e,r=this.x+Math.cos(n)*this.radius,i=this.y+Math.sin(n)*this.radius,[r,i]},e.prototype.fill=function(e){return this.fillStyle=e,this.ctx.fillStyle=this.fillStyle,this},e.prototype.stroke=function(e,t){var n;return this.strokeStyle=e,t==null&&(t=this.lineWidth),n=this.ctx,n.lineWidth=t,n.strokeStyle=this.strokeStyle,this},e.prototype.dash=function(e,t,n){return this.strokeStyle=e,t==null&&(t=this.lineWidth),n==null&&(n=[5,2]),this.setLineDash(n),this.stroke(e,t/2)},e.prototype.setLineDash=function(e){var t;return t=this.ctx,t.setLineDash?t.setLineDash(e):t.mozDash!=null?t.mozDash=e:t.webkitLineDash!=null&&(t.webkitLineDash=e),this},e}(),n=function(){function r(t,n){var i,s;this.ctx=t;if(!(this instanceof r))return new r(t,n);e.extend(this,n),(s=this.gridBorderColor)==null&&(this.gridBorderColor=this.gridLineColor),this.scale!==1&&(i=this.scale,this.radius=this.radius*i,this.plotLineWidth=this.plotLineWidth*i,this.gridLineWidth=this.gridLineWidth*i,this.gridBorderWidth=this.gridBorderWidth*i,this.font=(this.font||"").replace(/\d+/i,function(e){return e*i}),this.offsetX=this.offsetX*i,this.offsetY=this.offsetY*i),this.cX=this.radius+this.offsetX,this.cY=this.radius+this.offsetY,this.datas=[]}var n;return r.prototype.ctx=null,r.prototype.radius=0,r.prototype.plotLineColor="red",r.prototype.plotLineWidth=3,r.prototype.plotBGColor="rgba(255, 0, 0, 0.2)",r.prototype.gridLength=null,r.prototype.gridLineColor="#ccc",r.prototype.gridLineWidth=1,r.prototype.subGridLineColor="#ccc",r.prototype.subGridLineWidth=1,r.prototype.gridBorderColor=null,r.prototype.gridBorderWidth=3,r.prototype.gridBGColor="#fff",r.prototype.divisionGridStep=1,r.prototype.divisionNumberStep=1,r.prototype.divisionGridPartition=1,r.prototype.fontColor="#000",r.prototype.font="bold 13px Arial",r.prototype.offsetX=0,r.prototype.offsetY=0,r.prototype.scale=1,r.prototype.cX=0,r.prototype.cY=0,r.prototype.divisions=0,r.prototype.apexLength=0,r.prototype.datas=null,r.dataParser=function(e){var t,n;return e=e.replace(/[^0-9,\.\|\-]/g,""),n=e.split("|"),n=function(){var e,r,i;i=[];for(e=0,r=n.length;e<r;e++)t=n[e],i.push(t.split(","));return i}(),n},n=function(e){return Math.max.apply(Math,e)},r.prototype.add=function(t){var r,i,s,o,u;e.isArray(t[0])?r=t:r=[t],this.datas=this.datas.concat(t),u=this.datas;for(s=0,o=u.length;s<o;s++)t=u[s],i=Math.ceil(n(t)),this.gridLength=Math.max(i,this.gridLength),this.apexLength=Math.max(t.length,this.apexLength);return this.divisions=this.radius/this.gridLength,this},r.prototype.draw=function(){var t,n,r,i,s,o,u;this.drawGrid(),i=e.isArray(this.plotLineColor),i&&(t=this.plotLineColor.length),u=this.datas;for(r=s=0,o=u.length;s<o;r=++s)n=u[r],i?this.drawData(n,this.plotLineColor[r%t]):this.drawData(n);return this.drawNumber(),this},r.prototype.drawData=function(e,n){var r,i,s,o,u;n==null&&(n=this.plotLineColor),this.ctx.beginPath(),i=0;while(i<this.apexLength)u=parseFloat(e[i])||0,o=this.divisions*u,s=new t(null,this.apexLength,o,this.cX,this.cY),r=s.getApex(i),i===0?this.ctx.moveTo(r[0],r[1]):this.ctx.lineTo(r[0],r[1]),i+=1;return this.ctx.lineWidth=this.plotLineWidth,this.ctx.strokeStyle=n,this.ctx.fillStyle=this.plotBGColor,this.ctx.closePath(),this.ctx.stroke(),this.ctx.fill(),this},r.prototype.drawGrid=function(){var e,n,r,i;n=this.divisions/this.divisionGridPartition,i=this.gridLength*this.divisionGridPartition;while(i)r=new t(this.ctx,this.apexLength,n*i,this.cX,this.cY),i===this.gridLength*this.divisionGridPartition?(r.stroke(this.gridBorderColor,this.gridBorderWidth).fill(this.gridBGColor).draw(),r.stroke(this.gridLineColor,this.gridLineWidth/2).radiate()):(e=i/this.divisionGridPartition,e===Math.floor(e)?r.stroke(this.gridLineColor,this.gridLineWidth).draw():r.stroke(this.subGridLineColor,this.subGridLineWidth/3).draw()),i-=1;return this},r.prototype.drawNumber=function(){var e,t,n;n=this.gridLength+1,e=-11,t=8,this.ctx.font=this.font,this.ctx.fillStyle=this.fontColor,this.ctx.strokeStyle=this.gridBGColor;while(n)n-=1,n%this.divisionNumberStep||this.ctx.fillText(""+n,this.cX+e,this.cY-this.divisions*n+t);return this},r}(),e.raderChart=n,e.fn.radarChart=function(t){return t=e.extend({data:function(t){return t.dataParser(e(this).data("values"))}},t),this.each(function(){var r,i,s,o,u;if(this.nodeName.toLowerCase()!=="canvas")return;r=e(this),(u=t.radius)==null&&(t.radius=Math.min(r.width(),r.height())/2),o=e.isFunction(t.data)?t.data.call(this,n):e.isArray(t.data[0])?o=t.data:o=[t.data],s=this.getContext("2d"),i=new n(s,t),i.add(o),i.draw()})}}).call(this);